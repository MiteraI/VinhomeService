<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeLeaf.org">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://kit.fontawesome.com/097aba0852.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="../static/tailwind/font.css" />
  <link rel="stylesheet" href="../static/tailwind/index.css" />
  <title>Service name goes here</title>
</head>

<body class="overflow-x-hidden h-[100%] w-[100%]">
  <header th:replace="~{./fragments/header.html}"></header>

  <div class="mt-7 border-2 border-black mb-7 xl:mx-20 lg:mx-20 md:mx-20 sm:mx-0 xm:mx-0">

    <div class="mx-10 my-8 h-[100%] flex">
      <div class="w-[40%] h-[100%]">
        <div class="">
          <div class="bg-blue-400 flex justify-center items-center py-[5%] rounded-lg">
            <div class=" w-[40%]"><img class="object-cover w-[200px] h-[200px] border-8 border-white rounded-full"
                src="../static/assets/images/Keanu-Reeves-5939c06.jpg" alt="" srcset="">
            </div>
          </div>
        </div>

        <div class="flex flex-col items-center">
          <button
            class="edit-btn mt-7 bg-blue-300 hover:bg-blue-400 w-[50%] py-[1%] rounded-lg text-xl font-medium">Edit
            Profile</button>
          <button class="mt-7 bg-blue-300 hover:bg-blue-400 w-[50%] py-[1%] rounded-lg text-xl font-medium">Reset
            Password</button>
          <button class="mt-7 bg-blue-300 hover:bg-blue-400 w-[50%] py-[1%] rounded-lg text-xl font-medium">Change
            Profile
            Picture</button>
        </div>
      </div>

      <div class="edit-form-container w-[60%] pl-[2%] pointer-events-none">
        <form class="edit-profile-form">
          <label for="">Username<span class="error-message italic text-red-500 ml-1">err</span></label><br>
          <input type="text" name="txtUsername" value="" th:placeholder="${acc != null} ? ${acc.accountName}"
            class="profile-form-input w-[100%] border-2 rounded-lg bg-slate-200 px-3 py-2 mb-3">

          <label for="">Email<span class="error-message italic text-red-500 ml-1">err</span></label><br>
          <input type="text" name="txtEmail" value="" th:placeholder="${acc != null} ? ${acc.email}"
            class="profile-form-input w-[100%] border-2 rounded-lg bg-slate-200 px-3 py-2 mb-3">

          <label for="">First Name</label><br>
          <span class="mb-3 flex">
            <input type="text" name="txtFirstname" value="" th:placeholder="${acc != null} ? ${acc.firstName}"
              class="prohibit-input w-[100%] border-2 rounded-l-lg bg-slate-200 px-3 py-2 pointer-event-none focus:outline-0 capitalize">
            <i class="fa fa-lock flex items-center border-2 rounded-r-lg bg-slate-200 pr-3"
              title="you can't edit this field"></i></span>

          <label for="">Last Name</label><br>
          <span class="mb-3 flex">
            <input type="text" name="txtLastname" value="" th:placeholder="${acc != null} ? ${acc.lastName}"
              class="prohibit-input w-[100%] border-2 rounded-l-lg bg-slate-200 px-3 py-2 pointer-event-none focus:outline-0 capitalize">
            <i class="fa fa-lock flex items-center border-2 rounded-r-lg bg-slate-200 pr-3"
              title="you can't edit this field"></i></span>

          <label for="">Date of Birth<span class="error-message italic text-red-500 ml-1">err</span></label><br>
          <input type="date" name="txtDate" value="" th:placeholde="${#dates.format(acc.dob, 'dd/MM/yyyy')}"
            class="profile-form-input w-[100%] border-2 rounded-lg bg-slate-200 px-3 py-2 mb-3">

          <label for="">Phone<span class="error-message italic text-red-500 ml-1">err</span></label><br>
          <input type="text" name="txtPhone" value="" placeholder="012345678"
            class="profile-form-input w-[100%] border-2 rounded-lg bg-slate-200 px-3 py-2 mb-3">

          <div class="mb-3 w-[100%] flex items-center">
            <div class="w-[100%]">
              <label for="">Room</label><br>
              <span class="mb-3 flex">
                <input type="text" name="txtRoom" value="" th:placeholder="${address != null} ? ${address.buildingRoom}"
                  class="prohibit-input w-[100%] border-2 rounded-l-lg bg-slate-200 px-3 py-2 focus:outline-0">
                <i class="fa fa-lock flex items-center border-2 rounded-r-lg bg-slate-200 pr-3"
                  title="you can't edit this field"></i></span>
            </div>

            <div class="ml-[6%] w-inherit">
              <label>Block</label><br>
              <div class="flex">
                <span class="prohibit-input-radio py-2 flex flex-[.5]">
                  <input class="scale-[1.3]" type="radio" value="A" name="radioBlock"
                    th:checked="${address.buildingBlock} == A">
                  <span class="ml-[3%]">
                    Block A</span>
                </span>
                <span class="prohibit-input-radio py-2 flex flex-[.5]">
                  <input class="scale-[1.3]" type="radio" value="B" name="radioBlock"
                    th:checked="${address.buildingBlock} == B">
                  <span class="ml-[3%]">
                    Block B</span>
                </span>
                <span class="prohibit-input-radio py-2 flex flex-[.5]">
                  <input class="scale-[1.3]" type="radio" value="C" name="radioBlock"
                    th:checked="${address.buildingBlock} == C">
                  <span class="ml-[3%]">
                    Block C</span>
                </span>
              </div>
            </div>
          </div>
          <div class="flex justify-end ">
            <button class="cancel-btn px-3 py-2 bg-red-400 mr-[2%] rounded-lg hover:bg-red-500">Cancel</button>
            <button class="submit-btn px-3 py-2 bg-blue-400 mr-[2%] rounded-lg hover:bg-blue-500">Save</button>
          </div>
        </form>

      </div>

    </div>



  </div>

  <footer th:replace="~{./fragments/footer.html}"></footer>

  <script>
    const editFormContainer = document.querySelector('.edit-form-container')
    const editBtn = document.querySelector('.edit-btn')

    const profileFormInput = document.querySelectorAll('.profile-form-input');
    const prohibitInput = document.querySelectorAll('.prohibit-input')
    const prohibitInputRadio = document.querySelectorAll('.prohibit-input-radio')
    const profileBtn = document.querySelector('.profile-btn')

    const cancelBtn = document.querySelector('.cancel-btn')

    const dropDownMenuBtn = document.querySelector('#dropdownDividerButton')
    const dropDownMenu = document.querySelector('#dropdownDivider')

    const logo = document.querySelector('.logo');
    const logoStyle = window.getComputedStyle(logo, null).getPropertyValue('font-size');
    const logoFontSize = parseFloat(logoStyle);


    let canEdit = false

    profileBtn.style.height = `${logoFontSize}px`

    cancelBtn.addEventListener('click', (e) => {
      e.preventDefault()
      profileFormInput.forEach(input => {
        input.value = ''
      });
      editFormContainer.classList.add('pointer-events-none')
    })

    editBtn.addEventListener('click', (e) => {
      canEdit = true
      editFormContainer.classList.remove('pointer-events-none')
      profileFormInput.forEach(input => {
        input.value = input.getAttribute('placeholder') == null ? '' : input.getAttribute('placeholder')
      });
    })

    profileFormInput.forEach(input => {
      input.addEventListener('keydown', (e) => {
        if (canEdit === false) {
          e.preventDefault()
        }

        e.returnValue = true
        for (let i = 0; i < prohibitInput.length; i++) {
          prohibitInput[i].value = ''
        }
      })
    })

    prohibitInput.forEach(input => {
      input.addEventListener('keydown', (e) => {
        if (e.keyCode === 9) {
          e.returnValue = true
        } else {
          e.preventDefault()
        }
      })
    })

    prohibitInputRadio.forEach(radio => {
      radio.addEventListener('click', (e) => {
        e.preventDefault()
      })
    })

    dropDownMenuBtn.addEventListener('click', () => {
      console.log("clicked")
      dropDownMenu.classList.toggle("hidden")
    })
  </script>

</body>

</html>